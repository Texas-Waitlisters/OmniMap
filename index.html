<!DOCTYPE HTML>
<!--
   Astral by HTML5 UP
   html5up.net | @ajlkn
   Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
   -->
<html>
   <head>
      <title>OmniMap by the Waitlisters</title>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
      <link rel="stylesheet" href="assets/css/main.css" />
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
      <noscript>
         <link rel="stylesheet" href="assets/css/noscript.css" />
      </noscript>
   </head>
   <body class="is-preload">
      <!-- Wrapper-->
      <div id="wrapper">
         <!-- Nav -->
         <nav id="nav">
            <a href="#home" class="icon fa-home"><span>Home</span></a>
            <a href="#share" class="icon fa-share-alt"><span>Share</span></a>
            <a href="#map" class="icon fa-map-marker"><span>Map</span></a>
            <!-- <a href="#contact" class="icon fa-envelope"><span>Contact</span></a> -->
         </nav>
         <!-- Main -->
         <div id="main">
            <!-- Me -->
            <article id="home" class="panel intro">
               <header>
                  <h1>OmniMap</h1>
                  <p>Mesh-network, peer-to-peer distributed, crowdsourced maps for disaster relief</p>
               </header>
               <a href="#work" class="jumplink pic">
               <span class="arrow icon fa-chevron-right"><span>See my work</span></span>
               <img src="images/HurricaneEvacSign2.jpg" alt="" />
               </a>
            </article>
            <!-- Work -->
            <article id="share" class="panel">
               <header>
                  <h2>Share an Update</h2>
               </header>
               <p>
                  Phasellus enim sapien, blandit ullamcorper elementum eu, condimentum eu elit.
                  Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia
                  luctus elit eget interdum.
               </p>
							 <a style="border-bottom: none" href="#" target="_blank"><button class="button special">Share location</button></a>
            </article>
            <!-- Contact -->
            <article id="map" class="panel">
               <header>
                  <h2>View Map</h2>
               </header>
               <!-- <iframe width="500" height="300" scrolling="yes" frameborder="no" src="https://fusiontables.google.com/embedviz?viz=GVIZ&amp;t=TABLE&amp;q=select+col1%2C+col0%2C+col2%2C+col3+from+1yUCKHzTjyafYp5DdzVSA5a26WiBYlyRW8JYNfdP7&amp;containerId=googft-gviz-canvas"></iframe> -->
               <!DOCTYPE html>
               <html>
                  <head>
                     <meta name="viewport"/>
                     <title>OmniMap - Google Fusion Tables</title>
                     <!-- <style type="text/css">
                        html, body, #googft-mapCanvas {
                          height: 300px;
                          width: 500px;
                        }
                        </style> -->
                     <script type="text/javascript" src="https://maps.google.com/maps/api/js?v=3&amp;libraries=visualization"></script>
                     <script type="text/javascript">
                        if (window.location.protocol == "file:") {
                          alert('This script only works when loaded from a web server,' +
                              ' not from a file on your computer.');
                        }
                        function ftOnLoadClientApi() {
                        }
                     </script>
                     <script type="text/javascript" src="https://apis.google.com/js/client.js?onload=ftOnLoadClientApi"></script>
                     <script type="text/javascript">
                        var map;

                        function loadApi() {
                          gapi.client.load('fusiontables', 'v1', initialize);
                        }

                        function initialize() {
                          var isMobile = (navigator.userAgent.toLowerCase().indexOf('android') > -1) ||
                            (navigator.userAgent.match(/(iPod|iPhone|iPad|BlackBerry|Windows Phone|iemobile)/));
                          if (isMobile) {
                            var viewport = document.querySelector("meta[name=viewport]");
                            viewport.setAttribute('content', 'initial-scale=1.0, user-scalable=no');
                          }
                          var mapDiv = document.getElementById('googft-mapCanvas');
                          mapDiv.style.width = isMobile ? '100%' : 'auto';
                          mapDiv.style.height = isMobile ? '100%' : '50vh';
                          map = new google.maps.Map(mapDiv, {
                            center: new google.maps.LatLng(29.718800825326202, -95.36487632959734),
                            zoom: 12,
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                          });
                          var query = 'select col2, col1 from 1yUCKHzTjyafYp5DdzVSA5a26WiBYlyRW8JYNfdP7 limit 1000';
                          var request = gapi.client.fusiontables.query.sqlGet({ sql: query });
                          request.execute(function(response) {
                            onDataFetched(response);
                          });
                        }

                        function onDataFetched(response) {
                          if (response.error) {
                            alert('Unable to fetch data. ' + response.error.message +
                                ' (' + response.error.code + ')');
                          } else {
                            drawHeatmap(extractLocations(response.rows));
                          }
                        }

                        function extractLocations(rows) {
                          var locations = [];
                          for (var i = 0; i < rows.length; ++i) {
                            var row = rows[i];
                            if (row[0]) {
                            }
                          }
                          return locations;
                        }

                        function drawHeatmap(locations) {
                          var heatmap = new google.maps.visualization.HeatmapLayer({
                             dissipating: true,
                             gradient: [
                               'rgba(102,255,0,0)',
                               'rgba(147,255,0,1)',
                               'rgba(193,255,0,1)',
                               'rgba(238,255,0,1)',
                               'rgba(244,227,0,1)',
                               'rgba(244,227,0,1)',
                               'rgba(249,198,0,1)',
                               'rgba(255,170,0,1)',
                               'rgba(255,113,0,1)',
                               'rgba(255,57,0,1)',
                               'rgba(255,0,0,1)'
                             ],
                             opacity: 0.6,
                             radius: 10,
                             data: locations
                          });
                          heatmap.setMap(map);
                        }

                        google.maps.event.addDomListener(window, 'load', loadApi);
                     </script>
                  </head>
                  <body>
                     <div id="googft-mapCanvas"></div>
                  </body>
               </html>
            </article>
         </div>
         <!-- Footer -->
         <div id="footer">
            <ul class="copyright">
               <li>&copy; OmniMap.</li>
               <li>The Waitlisters</a></li>
            </ul>
         </div>
      </div>
      <!-- Scripts -->
      <script src="assets/js/jquery.min.js"></script>
      <script src="assets/js/browser.min.js"></script>
      <script src="assets/js/breakpoints.min.js"></script>
      <script src="assets/js/util.js"></script>
      <script src="assets/js/main.js"></script>
   </body>
</html>
